<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Music Player</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      body {
        font-family: "Inter", sans-serif;
        background-color: rgb(245, 239, 188);
        display: flex;
        justify-content: center;
        align-items: center;
        min-height: 100vh;
        margin: 0;
        text-align: center;
      }

      button {
        width: 40px;
        height: 40px;
        border: none;
        border-radius: 60%;
        background: #3a3a3a;
        color: white;
        font-size: 22px;
        cursor: pointer;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        transition: background 0.3s ease, transform 0.2s;
      }

      button:hover {
        background: #555;
        transform: scale(1.1);
      }

      .player {
        background-color: #ffffff;
        border-radius: 1.5rem;
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        padding: 2rem;
        width: 90%;
        max-width: 400px;
        text-align: center;
        display: flex;
        flex-direction: column;
        gap: 1.5rem;
      }

      #play {
        width: 60px;
        height: 60px;
        font-size: 2rem;
        background: #22c55e;
      }

      #play:hover {
        background: #16a34a;
      }

      #volume {
        width: 80%;
        appearance: none;
        height: 0.5rem;
        background: #e0e0e0;
        outline: none;
        border-radius: 0.25rem;
        margin: 0 auto;
      }

      .progress-container {
        width: 100%;
        height: 8px;
        background: #ddd;
        border-radius: 4px;
        cursor: pointer;
        position: relative;
      }

      .progress-filled {
        height: 100%;
        background: #22c55e;
        width: 0%;
        border-radius: 4px;
      }

      #shuffle.active {
        background: #22c55e;
      }
    </style>
  </head>
  <body>
    <div class="player">
      <div class="track-info">
        <h3 id="title">Chill Vibes</h3>
        <p id="artist">DJ Flow</p>
      </div>

      <audio id="audio">
        <source src="./music/ChillVibes.mp3" />
      </audio>

      <div id="time-display" class="text-sm text-gray-600">00:00 / 00:00</div>

      <div class="progress-container" id="progress-container">
        <div class="progress-filled" id="progress-filled"></div>
      </div>

      <div class="controls">
        <button id="prev" title="Previous">‚èÆ</button>
        <button id="play" title="Play/Pause">‚ñ∂</button>
        <button id="next" title="Next">‚è≠</button>
        <button id="shuffle" title="Shuffle">üîÄ</button>
      </div>

      <input type="range" id="volume" min="0" max="1" step="0.01" value="0.5" />
      <div id="volume-percentage" class="text-sm text-gray-600">50%</div>
    </div>

    <script>
      const playlist = [
        {
          title: "Chill Vibes",
          artist: "DJ Flow",
          src: "./music/ChillVibes.mp3",
        },
        {
          title: "Synthwave Jam",
          artist: "LoFi Artist",
          src: "./music/SynthwaveJam.mp3",
        },
        {
          title: "Unicorn Heads",
          artist: "SynthMan",
          src: "./music/UnicornHeads.mp3",
        },
      ];

      let currentPosition = 0;

      const audio = document.querySelector("audio");
      const volumeSlider = document.getElementById("volume");
      const volumeDisplay = document.getElementById("volume-percentage");
      const progressContainer = document.getElementById("progress-container");
      const progressFilled = document.getElementById("progress-filled");
      const timeDisplay = document.getElementById("time-display");

      // Set initial volume
      audio.volume = volumeSlider.value;
      volumeDisplay.textContent = `${Math.round(volumeSlider.value * 100)}%`;

      // Volume control
      volumeSlider.addEventListener("input", (e) => {
        const volumeValue = e.target.value;
        audio.volume = volumeValue;
        volumeDisplay.textContent = `${Math.round(volumeValue * 100)}%`;
      });

      // Format time helper
      function formatTime(seconds) {
        const mins = Math.floor(seconds / 60);
        const secs = Math.floor(seconds % 60);
        return `${String(mins).padStart(2, "0")}:${String(secs).padStart(
          2,
          "0"
        )}`;
      }

      // Time + progress bar update
      audio.addEventListener("timeupdate", () => {
        const current = formatTime(audio.currentTime);
        const total = formatTime(audio.duration || 0);
        timeDisplay.textContent = `${current} / ${total}`;

        const percent = (audio.currentTime / audio.duration) * 100;
        progressFilled.style.width = `${percent}%`;
      });

      // Click to seek in progress bar
      progressContainer.addEventListener("click", (e) => {
        const width = progressContainer.clientWidth;
        const clickX = e.offsetX;
        const duration = audio.duration;
        audio.currentTime = (clickX / width) * duration;
      });

      // Play / Pause button
      document.querySelector("#play").addEventListener("click", () => {
        if (audio.paused) {
          audio.play();
          document.querySelector("#play").textContent = "‚è∏";
        } else {
          audio.pause();
          document.querySelector("#play").textContent = "‚ñ∂";
        }
      });

      // Next song
      document.querySelector("#next").addEventListener("click", () => {
        if (isShuffle) {
          let randomIndex;
          do {
            randomIndex = Math.floor(Math.random() * playlist.length);
          } while (randomIndex === currentPosition && playlist.length > 1);
          currentPosition = randomIndex;
        } else {
          currentPosition = (currentPosition + 1) % playlist.length;
        }
        switchSong(currentPosition);
      });

      // Previous song
      document.querySelector("#prev").addEventListener("click", () => {
        currentPosition =
          (currentPosition - 1 + playlist.length) % playlist.length;
        switchSong(currentPosition);
      });

      let isShuffle = false;

      // Toggle shuffle mode
      document.getElementById("shuffle").addEventListener("click", () => {
        isShuffle = true;
        document
          .getElementById("shuffle")
          .classList.toggle("active", isShuffle);
      });

      function switchSong(index) {
        const song = playlist[index];
        audio.src = song.src;
        document.getElementById("title").textContent = song.title;
        document.getElementById("artist").textContent = song.artist;
        audio.load();

        audio.addEventListener("loadedmetadata", () => {
          const total = formatTime(audio.duration);
          timeDisplay.textContent = `00:00 / ${total}`;
        });

        audio.play();
        document.querySelector("#play").textContent = "‚è∏";
      }
    </script>
  </body>
</html>
